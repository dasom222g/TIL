# Using Anthropic Model in n8n

## Context
n8n에서 Anthropic 모델을 사용할 때 400 Bad Request 오류가 발생하는 문제가 있었습니다. 이를 해결하기 위해 문제를 조사한 결과, `temperature`와 `top_p` 파라미터를 동시에 설정할 경우 에러가 발생한다는 것을 발견했습니다.

## Core
Anthropic API를 호출할 때, `temperature`와 `top_p` 둘 중 하나만 사용해야 합니다. 두 파라미터는 다른 생성적 모델에서도 자주 사용되며, 서로 다른 방식으로 텍스트 생성의 다양성을 제어합니다. 오류 메시지는 다음과 같습니다:

```json
{
  "error": "400 Bad Request",
  "message": "Cannot set both 'temperature' and 'top_p' parameters simultaneously. Please choose one."
}
```

구문 예시는 다음과 같습니다:
```javascript
{
  "model": "claude-3",
  "prompt": "Translate the following text into French.",
  "temperature": 0.7
  // "top_p": 0.9 - 이 조합은 사용할 수 없습니다.
}
```
위처럼 두 파라미터 중 하나만 설정해야 정상 작동합니다.

## Insight
이러한 제약사항은 Anthropic의 API 정책에 따른 것이며, 공식 문서에서 이 정보를 확인할 수 있었습니다. 일반적으로 API 사용 시, 파라미터 조합의 제약사항을 유념해야 합니다. 이는 다른 AI 모델에서도 비슷한 이슈를 예방하는데 유용할 것입니다.